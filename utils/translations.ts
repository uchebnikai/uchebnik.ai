

import { SubjectId } from '../types';

export type Language = 
  | 'bg' | 'en' | 'de' | 'es' | 'tr' 
  | 'fr' | 'it' | 'pt' | 'ru' | 'zh' 
  | 'ja' | 'ko' | 'ar' | 'hi' | 'nl' 
  | 'pl' | 'ro' | 'el' | 'uk' | 'cs' 
  | 'sv' | 'hu' | 'vi';

export const LANGUAGES: { code: Language; label: string; countryCode: string }[] = [
  { code: 'bg', label: 'Български', countryCode: 'bg' },
  { code: 'en', label: 'English', countryCode: 'gb' },
  { code: 'de', label: 'Deutsch', countryCode: 'de' },
  { code: 'es', label: 'Español', countryCode: 'es' },
  { code: 'fr', label: 'Français', countryCode: 'fr' },
  { code: 'it', label: 'Italiano', countryCode: 'it' },
  { code: 'pt', label: 'Português', countryCode: 'pt' },
  { code: 'ru', label: 'Русский', countryCode: 'ru' },
  { code: 'zh', label: '中文', countryCode: 'cn' },
  { code: 'ja', label: '日本語', countryCode: 'jp' },
  { code: 'ko', label: '한국어', countryCode: 'kr' },
  { code: 'tr', label: 'Türkçe', countryCode: 'tr' },
  { code: 'ar', label: 'العربية', countryCode: 'sa' },
  { code: 'hi', label: 'हिन्दी', countryCode: 'in' },
  { code: 'nl', label: 'Nederlands', countryCode: 'nl' },
  { code: 'pl', label: 'Polski', countryCode: 'pl' },
  { code: 'ro', label: 'Română', countryCode: 'ro' },
  { code: 'el', label: 'Ελληνικά', countryCode: 'gr' },
  { code: 'uk', label: 'Українська', countryCode: 'ua' },
  { code: 'cs', label: 'Čeština', countryCode: 'cz' },
  { code: 'sv', label: 'Svenska', countryCode: 'se' },
  { code: 'hu', label: 'Magyar', countryCode: 'hu' },
  { code: 'vi', label: 'Tiếng Việt', countryCode: 'vn' },
];

const BASE_EN = {
    'app_name': 'Uchebnik AI',
    'app_desc': 'Your intelligent school assistant.',
    'loading': 'Loading...',
    'error': 'An error occurred.',
    'success': 'Success!',
    'save': 'Save',
    'cancel': 'Cancel',
    'delete': 'Delete',
    'edit': 'Edit',
    'back': 'Back',
    'close': 'Close',
    'login': 'Login',
    'register': 'Register',
    'logout': 'Logout',
    'email': 'Email',
    'password': 'Password',
    'first_name': 'First Name',
    'last_name': 'Last Name',
    'birth_date': 'Birth Date',
    'no_account': 'No account?',
    'have_account': 'Have an account?',
    'forgot_password': 'Forgot password?',
    'login_google': 'Login with Google',
    'or_email': 'or with email',
    'chat_general': 'General Chat',
    'new_chat': 'New Chat',
    'school': 'School',
    'university': 'University',
    'students': 'Students',
    'teachers': 'Teachers',
    'uni_students': 'Students',
    'uni_professors': 'Professors',
    'upgrade_plan': 'Upgrade Plan',
    'unlock_potential': 'Unlock full potential',
    'settings': 'Settings',
    'manage_plan': 'Manage Plan',
    'terms': 'Terms',
    'help': 'Help',
    'synced': 'Synced',
    'syncing': 'Syncing...',
    'sync_error': 'Sync Error',
    'hello': 'Hello',
    'subtitle': 'Your intelligent education assistant.',
    'ask_anything': 'Ask anything.',
    'start': 'Start',
    'enter': 'Enter',
    'add_photo': 'Add Photo',
    'scan': 'Scan',
    'voice_input': 'Voice Input',
    'ai_warning': 'AI can make mistakes.',
    'about_us': 'About Us',
    'contact': 'Contact',
    'privacy': 'Privacy',
    'select_role': 'Select Role',
    'select_role_uni': 'Select Role (Uni)',
    'role_student': 'Student',
    'role_teacher': 'Teacher',
    'role_uni_student': 'Student',
    'role_uni_professor': 'Professor',
    'desc_student': 'Help with lessons and homework.',
    'desc_teacher': 'Tests, plans, and resources.',
    'desc_uni_student': 'Coursework and exams.',
    'desc_uni_professor': 'Lectures and materials.',
    'select_subject': 'Subjects',
    'choose_subject': 'Choose a subject to start.',
    'back_to_roles': 'Back to Roles',
    'what_to_do': 'What are we doing today?',
    'teacher_tools': 'Teacher Tools',
    'mode_solve': 'Solve',
    'mode_solve_desc': 'Help with problems and exercises.',
    'mode_learn': 'Learn',
    'mode_learn_desc': 'Explanations of lessons and concepts.',
    'mode_test': 'Create Test',
    'mode_test_desc': 'Generate questions and answers.',
    'mode_plan': 'Lesson Plan',
    'mode_plan_desc': 'Structure lessons and goals.',
    'mode_resources': 'Ideas & Resources',
    'mode_resources_desc': 'Interactive tasks and materials.',
    'type_message': 'Type a message...',
    'generating': 'AI is generating...',
    'reasoning': 'Reasoning',
    'click_details': 'Click for details',
    'analyzing': 'Analyzing task...',
    'preparing': 'Preparing response...',
    'reply_to': 'Reply to',
    'you': 'you',
    'profile': 'Profile',
    'security': 'Security',
    'personalization': 'Personalization',
    'language': 'Language',
    'theme_color': 'Theme Color',
    'dark_mode': 'Dark Mode',
    'light_mode': 'Light Mode',
    'chat_bg': 'Chat Background',
    'upload_image': 'Upload Image',
    'remove': 'Remove',
    'ai_settings': 'AI Settings',
    'grade_level': 'Grade Level',
    'text_size': 'Text Size',
    'response_length': 'Response Length',
    'data': 'Data',
    'delete_all_chats': 'Delete all chats',
    'delete_history_desc': 'Delete entire conversation history',
    'save_changes': 'Save Changes',
    'current_password': 'Current Password',
    'new_password': 'New Password',
    // Auth Success Messages
    'auth_success_email_title': 'Email Verified!',
    'auth_success_email_desc': 'Your email has been successfully verified. Your account is now active.',
    'auth_success_magic_title': 'Welcome Back!',
    'auth_success_magic_desc': 'You have successfully signed in via Magic Link.',
    'auth_success_recovery_title': 'Reset Ready',
    'auth_success_recovery_desc': 'You can now update your password.',
    'auth_success_default_title': 'Success!',
    'auth_success_default_desc': 'Action completed successfully.',
    'continue_to_app': 'Continue to App',
};

// Complete English Dictionary (Fallback)
const EN_DICT = {
    ...BASE_EN,
    [`subject_${SubjectId.MATH}`]: 'Mathematics',
    [`subject_${SubjectId.BULGARIAN}`]: 'Bulgarian Literature',
    [`subject_${SubjectId.ENGLISH}`]: 'English',
    [`subject_${SubjectId.GERMAN}`]: 'German',
    [`subject_${SubjectId.RUSSIAN}`]: 'Russian',
    [`subject_${SubjectId.PHYSICS}`]: 'Physics',
    [`subject_${SubjectId.CHEMISTRY}`]: 'Chemistry',
    [`subject_${SubjectId.BIOLOGY}`]: 'Biology',
    [`subject_${SubjectId.HISTORY}`]: 'History',
    [`subject_${SubjectId.GEOGRAPHY}`]: 'Geography',
    [`subject_${SubjectId.FRENCH}`]: 'French',
    [`subject_${SubjectId.SPANISH}`]: 'Spanish',
    [`subject_${SubjectId.JAPANESE}`]: 'Japanese',
    [`subject_${SubjectId.IT}`]: 'Computer Science',
    [`subject_${SubjectId.TECHNOLOGIES}`]: 'Technologies',
    [`subject_${SubjectId.MUSIC}`]: 'Music',
    [`subject_${SubjectId.PHILOSOPHY}`]: 'Philosophy',
    [`subject_${SubjectId.CITIZENSHIP}`]: 'Citizenship',
    [`subject_${SubjectId.RELIGION}`]: 'Religion',
    [`subject_${SubjectId.ART}`]: 'Art',
    [`subject_${SubjectId.PE}`]: 'Sports',
    [`subject_${SubjectId.HIGHER_MATH}`]: 'Higher Math',
    [`subject_${SubjectId.COMPUTER_SCIENCE}`]: 'Computer Science',
    [`subject_${SubjectId.ECONOMICS}`]: 'Economics',
    [`subject_${SubjectId.FINANCE}`]: 'Finance',
    [`subject_${SubjectId.MANAGEMENT}`]: 'Management',
    [`subject_${SubjectId.LAW}`]: 'Law',
    [`subject_${SubjectId.MEDICINE}`]: 'Medicine',
    [`subject_${SubjectId.DENTAL_MEDICINE}`]: 'Dental Medicine',
    [`subject_${SubjectId.PHARMACY}`]: 'Pharmacy',
    [`subject_${SubjectId.VETERINARY_MEDICINE}`]: 'Veterinary Medicine',
    [`subject_${SubjectId.ENGINEERING}`]: 'Engineering',
    [`subject_${SubjectId.ARCHITECTURE}`]: 'Architecture',
    [`subject_${SubjectId.PSYCHOLOGY}`]: 'Psychology',
    [`subject_${SubjectId.PEDAGOGY}`]: 'Pedagogy',
    [`subject_${SubjectId.MARKETING}`]: 'Marketing',
    [`subject_${SubjectId.JOURNALISM}`]: 'Journalism',
    [`subject_${SubjectId.POLITICAL_SCIENCE}`]: 'Political Science',
    [`subject_${SubjectId.INT_RELATIONS}`]: 'Int. Relations',
    [`subject_${SubjectId.SOCIOLOGY}`]: 'Sociology',
    [`subject_${SubjectId.STATISTICS}`]: 'Statistics',
    [`subject_${SubjectId.ECOLOGY}`]: 'Ecology',
    [`subject_${SubjectId.TOURISM}`]: 'Tourism',
    [`subject_${SubjectId.GENERAL}`]: 'General Chat',
};

// Extended Bulgarian Dictionary
const BG_DICT = {
    'app_name': 'Uchebnik AI',
    'app_desc': 'Твоят интелигентен училищен помощник.',
    'loading': 'Зареждане...',
    'error': 'Възникна грешка.',
    'success': 'Успешно!',
    'save': 'Запази',
    'cancel': 'Отказ',
    'delete': 'Изтрий',
    'edit': 'Редактирай',
    'back': 'Назад',
    'close': 'Затвори',
    'login': 'Вход',
    'register': 'Регистрация',
    'logout': 'Изход',
    'email': 'Имейл',
    'password': 'Парола',
    'first_name': 'Име',
    'last_name': 'Фамилия',
    'birth_date': 'Дата на раждане',
    'no_account': 'Нямате акаунт?',
    'have_account': 'Имате акаунт?',
    'forgot_password': 'Забравена парола?',
    'login_google': 'Вход с Google',
    'or_email': 'или с имейл',
    'chat_general': 'Общ Чат',
    'new_chat': 'Нов чат',
    'school': 'Училище',
    'university': 'Университет',
    'students': 'Ученици',
    'teachers': 'Учители',
    'uni_students': 'Студенти',
    'uni_professors': 'Професори',
    'upgrade_plan': 'Upgrade Plan',
    'unlock_potential': 'Отключи пълния потенциал',
    'settings': 'Настройки',
    'manage_plan': 'Управление на плана',
    'terms': 'Общи условия',
    'help': 'Помощ',
    'synced': 'Синхронизирано',
    'syncing': 'Синхронизиране...',
    'sync_error': 'Грешка при синх.',
    'hello': 'Здравей',
    'subtitle': 'Твоят интелигентен помощник за образование.',
    'ask_anything': 'Попитай каквото и да е.',
    'start': 'Старт',
    'enter': 'Влез',
    'add_photo': 'Добави снимка',
    'scan': 'Сканирай',
    'voice_input': 'Гласово въвеждане',
    'ai_warning': 'AI може да допуска грешки.',
    'about_us': 'За нас',
    'contact': 'Контакти',
    'privacy': 'Поверителност',
    'select_role': 'Избери Роля',
    'select_role_uni': 'Избери Роля (ВУЗ)',
    'role_student': 'Ученик',
    'role_teacher': 'Учител',
    'role_uni_student': 'Студент',
    'role_uni_professor': 'Професор',
    'desc_student': 'Помощ с уроци и задачи.',
    'desc_teacher': 'Тестове, планове и ресурси.',
    'desc_uni_student': 'Курсови работи и изпити.',
    'desc_uni_professor': 'Лекции и материали.',
    'select_subject': 'Предмети',
    'choose_subject': 'Избери предмет, за да започнеш.',
    'back_to_roles': 'Назад към роли',
    'what_to_do': 'Какво ще правим днес?',
    'teacher_tools': 'Инструменти за преподавателя',
    'mode_solve': 'За решаване',
    'mode_solve_desc': 'Помощ със задачи и упражнения.',
    'mode_learn': 'За учене',
    'mode_learn_desc': 'Обяснения на уроци и концепции.',
    'mode_test': 'Създай Тест',
    'mode_test_desc': 'Генерирай въпроси и отговори за проверка.',
    'mode_plan': 'План на урок',
    'mode_plan_desc': 'Структурирай урока и целите.',
    'mode_resources': 'Идеи и Ресурси',
    'mode_resources_desc': 'Интерактивни задачи и материали.',
    'type_message': 'Напиши съобщение...',
    'generating': 'AI генерира отговор...',
    'reasoning': 'Мисловен процес',
    'click_details': 'Натисни за детайли',
    'analyzing': 'Анализирам задачата...',
    'preparing': 'Подготовка на отговора...',
    'reply_to': 'Отговор на',
    'you': 'теб',
    'profile': 'Профил',
    'security': 'Сигурност',
    'personalization': 'Персонализация',
    'language': 'Език',
    'theme_color': 'Основен Цвят',
    'dark_mode': 'Тъмна тема',
    'light_mode': 'Светла тема',
    'chat_bg': 'Фон на чата',
    'upload_image': 'Качи изображение',
    'remove': 'Премахни',
    'ai_settings': 'AI Настройки',
    'grade_level': 'Клас / Ниво',
    'text_size': 'Размер на текста',
    'response_length': 'Дължина на отговора',
    'data': 'Данни',
    'delete_all_chats': 'Изтрий всички чатове',
    'delete_history_desc': 'Изтрий цялата история на разговорите',
    'save_changes': 'Запази Промените',
    'current_password': 'Текуща Парола',
    'new_password': 'Нова Парола',
    // Auth Success Messages
    'auth_success_email_title': 'Имейлът е потвърден!',
    'auth_success_email_desc': 'Вашият имейл е успешно потвърден. Акаунтът ви вече е активен.',
    'auth_success_magic_title': 'Добре дошъл отново!',
    'auth_success_magic_desc': 'Успешно влязохте чрез Magic Link.',
    'auth_success_recovery_title': 'Възстановяване',
    'auth_success_recovery_desc': 'Сега можете да обновите паролата си.',
    'auth_success_default_title': 'Успех!',
    'auth_success_default_desc': 'Действието е изпълнено успешно.',
    'continue_to_app': 'Към приложението',
    [`subject_${SubjectId.MATH}`]: 'Математика',
    [`subject_${SubjectId.BULGARIAN}`]: 'Български език и Литература',
    [`subject_${SubjectId.ENGLISH}`]: 'Английски език',
    [`subject_${SubjectId.GERMAN}`]: 'Немски език',
    [`subject_${SubjectId.RUSSIAN}`]: 'Руски език',
    [`subject_${SubjectId.PHYSICS}`]: 'Физика и Астрономия',
    [`subject_${SubjectId.CHEMISTRY}`]: 'Химия и ООС',
    [`subject_${SubjectId.BIOLOGY}`]: 'Биология и ЗО',
    [`subject_${SubjectId.HISTORY}`]: 'История и Цивилизации',
    [`subject_${SubjectId.GEOGRAPHY}`]: 'География и Икономика',
    [`subject_${SubjectId.FRENCH}`]: 'Френски език',
    [`subject_${SubjectId.SPANISH}`]: 'Испански език',
    [`subject_${SubjectId.JAPANESE}`]: 'Японски език',
    [`subject_${SubjectId.IT}`]: 'Информатика и ИТ',
    [`subject_${SubjectId.TECHNOLOGIES}`]: 'Технологии и Предприемачество',
    [`subject_${SubjectId.MUSIC}`]: 'Музика',
    [`subject_${SubjectId.PHILOSOPHY}`]: 'Философия',
    [`subject_${SubjectId.CITIZENSHIP}`]: 'Гражданско Образование',
    [`subject_${SubjectId.RELIGION}`]: 'Религия',
    [`subject_${SubjectId.ART}`]: 'Изобразително Изкуство',
    [`subject_${SubjectId.PE}`]: 'Физ. Възпитание и Спорт',
    [`subject_${SubjectId.HIGHER_MATH}`]: 'Висша Математика',
    [`subject_${SubjectId.COMPUTER_SCIENCE}`]: 'Компютърни Науки',
    [`subject_${SubjectId.ECONOMICS}`]: 'Икономика',
    [`subject_${SubjectId.FINANCE}`]: 'Финанси',
    [`subject_${SubjectId.MANAGEMENT}`]: 'Мениджмънт',
    [`subject_${SubjectId.LAW}`]: 'Право',
    [`subject_${SubjectId.MEDICINE}`]: 'Медицина',
    [`subject_${SubjectId.DENTAL_MEDICINE}`]: 'Дентална Медицина',
    [`subject_${SubjectId.PHARMACY}`]: 'Фармация',
    [`subject_${SubjectId.VETERINARY_MEDICINE}`]: 'Ветеринарна Медицина',
    [`subject_${SubjectId.ENGINEERING}`]: 'Инженерство',
    [`subject_${SubjectId.ARCHITECTURE}`]: 'Архитектура',
    [`subject_${SubjectId.PSYCHOLOGY}`]: 'Психология',
    [`subject_${SubjectId.PEDAGOGY}`]: 'Педагогика',
    [`subject_${SubjectId.MARKETING}`]: 'Маркетинг',
    [`subject_${SubjectId.JOURNALISM}`]: 'Журналистика',
    [`subject_${SubjectId.POLITICAL_SCIENCE}`]: 'Политология',
    [`subject_${SubjectId.INT_RELATIONS}`]: 'Международни Отношения',
    [`subject_${SubjectId.SOCIOLOGY}`]: 'Социология',
    [`subject_${SubjectId.STATISTICS}`]: 'Статистика',
    [`subject_${SubjectId.ECOLOGY}`]: 'Екология',
    [`subject_${SubjectId.TOURISM}`]: 'Туризъм',
    [`subject_${SubjectId.GENERAL}`]: 'Общ Чат',
};

// Partially translated dictionaries for other major languages
// Fallback to English for missing keys happens in `t()` function.

const DE_DICT = {
    'settings': 'Einstellungen',
    'profile': 'Profil',
    'personalization': 'Personalisierung',
    'language': 'Sprache',
    'back': 'Zurück',
    'hello': 'Hallo',
    'subtitle': 'Ihr intelligenter Schulassistent.',
    'ask_anything': 'Frag mich alles.',
    'login': 'Anmelden',
    'school': 'Schule',
    'university': 'Universität',
    'students': 'Schüler',
    'teachers': 'Lehrer',
    'subject_math': 'Mathematik',
    'subject_english': 'Englisch',
    'subject_german': 'Deutsch',
    'subject_history': 'Geschichte',
    'subject_biology': 'Biologie',
    'subject_physics': 'Physik',
    'subject_chemistry': 'Chemie',
    'chat_general': 'Allgemeiner Chat',
};

const ES_DICT = {
    'settings': 'Ajustes',
    'profile': 'Perfil',
    'personalization': 'Personalización',
    'language': 'Idioma',
    'back': 'Atrás',
    'hello': 'Hola',
    'subtitle': 'Tu asistente escolar inteligente.',
    'ask_anything': 'Pregúntame lo que sea.',
    'login': 'Iniciar sesión',
    'school': 'Escuela',
    'university': 'Universidad',
    'students': 'Estudiantes',
    'teachers': 'Profesores',
    'subject_math': 'Matemáticas',
    'subject_english': 'Inglés',
    'subject_spanish': 'Español',
    'subject_history': 'Historia',
    'subject_biology': 'Biología',
    'chat_general': 'Chat General',
};

const FR_DICT = {
    'settings': 'Paramètres',
    'profile': 'Profil',
    'personalization': 'Personnalisation',
    'language': 'Langue',
    'back': 'Retour',
    'hello': 'Bonjour',
    'subtitle': 'Votre assistant scolaire intelligent.',
    'ask_anything': 'Demandez-moi n\'importe quoi.',
    'login': 'Connexion',
    'school': 'École',
    'university': 'Université',
    'students': 'Étudiants',
    'teachers': 'Enseignants',
    'subject_math': 'Mathématiques',
    'subject_english': 'Anglais',
    'subject_french': 'Français',
    'subject_history': 'Histoire',
    'chat_general': 'Discussion Générale',
};

const RU_DICT = {
    'settings': 'Настройки',
    'profile': 'Профиль',
    'personalization': 'Персонализация',
    'language': 'Язык',
    'back': 'Назад',
    'hello': 'Привет',
    'subtitle': 'Твой умный школьный помощник.',
    'ask_anything': 'Спрашивай что угодно.',
    'login': 'Войти',
    'school': 'Школа',
    'university': 'Университет',
    'students': 'Ученики',
    'teachers': 'Учителя',
    'subject_math': 'Математика',
    'subject_english': 'Английский',
    'subject_russian': 'Русский',
    'chat_general': 'Общий чат',
};

const TR_DICT = {
    'settings': 'Ayarlar',
    'profile': 'Profil',
    'personalization': 'Kişiselleştirme',
    'language': 'Dil',
    'back': 'Geri',
    'hello': 'Merhaba',
    'subtitle': 'Akıllı okul asistanınız.',
    'ask_anything': 'Bana her şeyi sor.',
    'login': 'Giriş',
    'school': 'Okul',
    'university': 'Üniversite',
    'students': 'Öğrenciler',
    'teachers': 'Öğretmenler',
    'subject_math': 'Matematik',
    'subject_english': 'İngilizce',
    'chat_general': 'Genel Sohbet',
};

const DICTIONARY: Record<string, Record<string, string>> = {
  bg: BG_DICT,
  en: EN_DICT,
  de: DE_DICT,
  es: ES_DICT,
  fr: FR_DICT,
  ru: RU_DICT,
  tr: TR_DICT,
  // Other languages will fallback to EN_DICT automatically in t() function
  it: { ...EN_DICT, 'settings': 'Impostazioni', 'language': 'Lingua', 'back': 'Indietro', 'school': 'Scuola', 'university': 'Università' },
  pt: { ...EN_DICT, 'settings': 'Configurações', 'language': 'Idioma', 'back': 'Voltar', 'school': 'Escola', 'university': 'Universidade' },
  zh: { ...EN_DICT, 'settings': '设置', 'language': '语言', 'back': '返回', 'school': '学校', 'university': '大学', 'hello': '你好' },
  ja: { ...EN_DICT, 'settings': '設定', 'language': '言語', 'back': '戻る', 'school': '学校', 'university': '大学', 'hello': 'こんにちは' },
  ko: { ...EN_DICT, 'settings': '설정', 'language': '언어', 'back': '뒤로', 'school': '학교', 'university': '대학', 'hello': '안녕하세요' },
};

export const t = (key: string, lang: Language = 'bg'): string => {
  // 1. Try specific language
  // 2. Try English
  // 3. Try Bulgarian (Original Default)
  // 4. Return key
  return DICTIONARY[lang]?.[key] || EN_DICT[key as keyof typeof EN_DICT] || BG_DICT[key as keyof typeof BG_DICT] || key;
};